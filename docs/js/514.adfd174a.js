"use strict";(self["webpackChunkiconos_plataforma"]=self["webpackChunkiconos_plataforma"]||[]).push([[514],{2514:(e,a,l)=>{l.r(a),l.d(a,{default:()=>F});var t=l(3673);function o(e,a,l,o,s,n){const u=(0,t.up)("Usuarios"),i=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(i,{padding:""},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)(u,{tipo:o.ruta2,key:o.ruta},null,8,["tipo"]))])),_:1})}l(5363);var s=l(1959),n=l(2323),u=l(8880);const i={class:"flex justify-end full-width"},r=(0,t.Uk)("Editar accesos"),d=(0,t.Uk)("Ver usuario"),p=(0,t.Uk)("Habilitado"),c=(0,t.Uk)("Deshabilitado"),m={class:"text-h6 text-white"},g={class:"text-center q-mt-sm"},w={class:"text-center q-mt-lg"};function v(e,a,l,o,s,v){const f=(0,t.up)("q-btn"),b=(0,t.up)("q-inner-loading"),k=(0,t.up)("q-tooltip"),_=(0,t.up)("q-td"),W=(0,t.up)("q-icon"),h=(0,t.up)("q-tr"),q=(0,t.up)("q-table"),y=(0,t.up)("q-card-section"),U=(0,t.up)("q-input"),V=(0,t.up)("q-separator"),Z=(0,t.up)("q-toggle"),Q=(0,t.up)("q-form"),C=(0,t.up)("q-card"),x=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(q,{class:"shadow-0",loading:o.loading,"no-data-label":"Sin datos",rows:o.datausers,columns:o.columns,dense:"",pagination:o.pagination},{top:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(f,{label:"Nuevo "+o.usergroup,color:"primary",unelevated:"",onClick:a[0]||(a[0]=e=>o.edituserDialog(o.cleanuser,!0)),"no-caps":""},null,8,["label"])])])),loading:(0,t.w5)((()=>[(0,t.Wm)(b,{showing:"",color:"primary"})])),body:(0,t.w5)((e=>[(0,t.Wm)(h,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{key:"actions",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{icon:"edit",onClick:a=>o.edituserDialog(e.row,!1),size:"xs",padding:"4px",color:"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[r])),_:1})])),_:2},1032,["onClick"]),(0,t.Wm)(f,{class:"q-ml-sm",icon:e.row.active?"person":"person_off",onClick:a=>o.editUserArea(e.row),size:"sm",padding:"4px",color:"primary",disabled:!e.row.active},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[d])),_:1})])),_:2},1032,["icon","onClick","disabled"])])),_:2},1032,["props"]),(0,t.Wm)(_,{class:"text-bold",key:"user",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.user),1)])),_:2},1032,["props"]),(0,t.Wm)(_,{key:"name",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,t.Wm)(_,{key:"email",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.email),1)])),_:2},1032,["props"]),(0,t.Wm)(_,{key:"active",props:e},{default:(0,t.w5)((()=>[e.row.active?((0,t.wg)(),(0,t.j4)(W,{key:0,name:"done",color:"positive"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[p])),_:1})])),_:1})):((0,t.wg)(),(0,t.j4)(W,{key:1,name:"cancel",color:"negative"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[c])),_:1})])),_:1}))])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["loading","rows","columns","pagination"]),(0,t.Wm)(x,{modelValue:o.dialog,"onUpdate:modelValue":a[6]||(a[6]=e=>o.dialog=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"bg-dark shadow-20",style:{"min-width":"320px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t._)("div",m,"Editar "+(0,n.zw)(o.usergroup),1)])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{onSubmit:(0,u.iM)(o.edituserFN,["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{modelValue:o.edituser.user,"onUpdate:modelValue":a[1]||(a[1]=e=>o.edituser.user=e),label:"estudiante"==o.usergroup?"Nº de Cuenta":"Usuario",rounded:"",standout:"",dark:"",dense:"",required:""},null,8,["modelValue","label"]),(0,t.Wm)(U,{class:"q-mt-sm",modelValue:o.edituser.name,"onUpdate:modelValue":a[2]||(a[2]=e=>o.edituser.name=e),label:"Nombre",rounded:"",standout:"",dark:"",dense:""},null,8,["modelValue"]),(0,t.Wm)(U,{class:"q-mt-sm",modelValue:o.edituser.email,"onUpdate:modelValue":a[3]||(a[3]=e=>o.edituser.email=e),label:"Email",rounded:"",standout:"",dark:"",dense:"",required:""},null,8,["modelValue"]),(0,t.Wm)(V,{spaced:""}),(0,t.Wm)(U,{class:"q-mt-sm",modelValue:o.edituser.password,"onUpdate:modelValue":a[4]||(a[4]=e=>o.edituser.password=e),label:"Contraseña",rounded:"",standout:"",dark:"",dense:"",hint:"Dejar vacío para mantener la contraseña."},null,8,["modelValue"]),(0,t.Wm)(V,{spaced:""}),(0,t.Wm)(V,{spaced:""}),(0,t._)("div",g,[(0,t.Wm)(Z,{class:"q-mt-sm text-white",modelValue:o.edituser.active,"onUpdate:modelValue":a[5]||(a[5]=e=>o.edituser.active=e),label:"Habilitado",color:"info"},null,8,["modelValue"])]),(0,t._)("div",w,[(0,t.Wm)(f,{label:"Guardar",color:"secondary",unelevated:"",type:"submit"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var f=l(3617),b=l(8825),k=l(9582);const _={props:["tipo"],setup(e){const a=(0,s.iH)(e.tipo||null),l=(0,b.Z)(),t=(0,k.tv)(),o=(0,f.oR)(),n=(0,s.iH)(!0),u=(0,s.iH)(),i=(0,s.iH)([{name:"actions",labe:"",align:"center"},{name:"user",label:"estudiante"==a.value?"Nº de Cuenta":"Usuario",field:"user",align:"left"},{name:"name",label:"Nombre",field:"name",align:"left"},{name:"email",label:"Email",field:"email",align:"left"},{name:"active",label:"Habilitado",field:"active",align:"center",sortable:!0}]),r=(0,s.iH)({sortBy:"active",rowsPerPage:50,descending:!0}),d=(0,s.iH)(!1),p=(0,s.iH)(null),c={user:"",name:"",email:"",group:a.value,active:!0},m=async()=>{o.dispatch("api/GetUsers").then((e=>{let l=[];if(n.value=!1,a.value)for(var t in e){var o=e[t];o.group==a.value&&l.push(o)}else l=e;u.value=l}))};m();const g=e=>{t.push("/"+a.value+"/"+e._id)},w=(e,a)=>{a&&(e.password="ABC"),p.value=JSON.parse(JSON.stringify(e)),d.value=!0},v=e=>{d.value=!1;const a=p.value._id;o.dispatch("api/SaveUser",{user:p.value}).then((e=>{m(),l.notify("Guardado"),_(a)})).catch((e=>{l.notify(e.message)})),p.value=null},_=e=>{o.dispatch("api/GetSingleData",{coll:"estudiantes",id:e}).then((l=>{if(0!=l.length)console.log(l);else{const l={user:e,coll:"estudiantes",beca:"",status:"ACTIVO",coloquio:"",tituloInvestigacion:""},t={user:e,coll:"docentes"},s="estudiante"==a.value?l:t;o.dispatch("api/SaveItem",s).then((e=>{console.log(e)}))}}))};return{loading:n,datausers:u,columns:i,edituserDialog:w,edituserFN:v,edituser:p,dialog:d,cleanuser:c,usergroup:a,editUserArea:g,pagination:r}}};var W=l(4260),h=l(3243),q=l(8240),y=l(6941),U=l(8186),V=l(3884),Z=l(8870),Q=l(4554),C=l(6778),x=l(151),H=l(5589),S=l(5269),N=l(4842),D=l(5869),j=l(8761),T=l(8886),z=l(7518),I=l.n(z);const A=(0,W.Z)(_,[["render",v]]),B=A;I()(_,"components",{QTable:h.Z,QBtn:q.Z,QInnerLoading:y.Z,QTr:U.Z,QTd:V.Z,QTooltip:Z.Z,QIcon:Q.Z,QDialog:C.Z,QCard:x.Z,QCardSection:H.Z,QForm:S.Z,QInput:N.Z,QSeparator:D.Z,QBtnToggle:j.Z,QToggle:T.Z});const E={components:{Usuarios:B},setup(){const e=(0,s.iH)(),a=(0,k.yj)(),l=e=>{let a=e.replace("/",""),l="";switch(a){case"estudiantes":l="estudiante";break;case"docentes":l="docente";break}return l};return e.value=l(a.path),(0,t.YP)(a,((t,o)=>{e.value=l(a.path)})),{ruta:e,ruta2:e}}};var G=l(4379);const P=(0,W.Z)(E,[["render",o]]),F=P;I()(E,"components",{QPage:G.Z})}}]);