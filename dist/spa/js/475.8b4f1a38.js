"use strict";(self["webpackChunkiconos_plataforma"]=self["webpackChunkiconos_plataforma"]||[]).push([[475],{8475:(a,e,t)=>{t.r(e),t.d(e,{default:()=>B});var l=t(3673);const r={class:"row q-col-gutter-md"},i={class:"col-12"};function s(a,e,t,s,n,o){const c=(0,l.up)("firma"),d=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(d,{padding:""},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("div",i,[s.userData?((0,l.wg)(),(0,l.j4)(c,{key:0,userdata:s.userData,user:s.user,onReload:s.loadUserData},null,8,["userdata","user","onReload"])):(0,l.kq)("",!0)])])])),_:1})}var n=t(1959),o=t(8825),c=t(3617),d=t(9582);const u=(0,l._)("div",{class:"text-h6 text-primary"},"Firma",-1),m=(0,l._)("div",{class:"text-caption"},"Añada su firma para utilizarla en los reportes CONACYT",-1),p={class:"text-center"},g={key:0,class:"row q-col-gutter-md items-center justify-center"},f={key:0,class:"col-sm-6 text-center"},v=(0,l._)("div",{class:"text-caption text-white"},"Firma almacenada",-1),w={class:"col-sm-6"},x=(0,l._)("div",{class:"text-caption text-white"},"Trace su firma en el recuadro inferior.",-1),_={class:"row q-mt-md items-center"},h={class:"col-6"},q={class:"col-6"},y=(0,l._)("div",{class:"text-caption text-white"},"O cargue la imagen con su firma.",-1);function k(a,e,t,r,i,s){const n=(0,l.up)("q-btn"),o=(0,l.up)("q-img"),c=(0,l.up)("q-card-section"),d=(0,l.up)("q-card"),k=(0,l.up)("VueSignaturePad"),F=(0,l.up)("file-pond");return(0,l.wg)(),(0,l.j4)(d,{class:"shadow-24"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[u,m,(0,l._)("div",p,[r.dialogFirma?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(n,{key:0,color:"primary",label:t.userdata.firma?"Actualizar firma":"Añadir firma",unelevated:"",onClick:r.openDialogFirma,"no-caps":""},null,8,["label","onClick"]))]),r.dialogFirma?((0,l.wg)(),(0,l.iD)("div",g,[t.userdata.firma?((0,l.wg)(),(0,l.iD)("div",f,[(0,l.Wm)(d,{class:"bg-grey q-ma-md q-mx-auto",style:{"max-width":"380px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"text-center"},{default:(0,l.w5)((()=>[v,(0,l.Wm)(o,{src:t.userdata.firma,style:{width:"100%","max-width":"380px"}},null,8,["src"])])),_:1})])),_:1})])):(0,l.kq)("",!0),(0,l._)("div",w,[(0,l.Wm)(d,{class:"bg-primary q-ma-md q-mx-auto",style:{"max-width":"380px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"text-center"},{default:(0,l.w5)((()=>[x,(0,l.Wm)(k,{class:"bg-white q-mx-auto",width:"320px",height:"180px",ref:"signature"},null,512),(0,l._)("div",_,[(0,l._)("div",h,[(0,l.Wm)(n,{label:"Limpiar",unelevated:"",color:"primary",size:"sm","no-caps":"",onClick:e[0]||(e[0]=a=>r.signature.clearSignature())})]),(0,l._)("div",q,[(0,l.Wm)(n,{label:"Guardar firma",unelevated:"",color:"primary","no-caps":"",onClick:r.saveSignature},null,8,["onClick"])])])])),_:1})])),_:1}),(0,l.Wm)(d,{class:"bg-primary q-ma-md q-mx-auto",style:{"max-width":"380px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"text-center"},{default:(0,l.w5)((()=>[y,(0,l.Wm)(F,{name:"firma","accepted-file-types":"image/jpeg, image/png","allow-multiple":!1,"label-idle":"Arrastre la imagen aquí o dé clic","label-file-loading":"Cargando","label-file-waiting-for-size":"Analizando","label-tap-to-cancel":"Clic para cancelar",credits:"false",allowFileEncode:!0,server:r.processFile,ref:"pond"},null,8,["server"])])),_:1})])),_:1})])])):(0,l.kq)("",!0)])),_:1})])),_:1})}var F=t(9923),b=t.n(F),C=t(1963),W=t.n(C),D=t(6591),Z=t.n(D);const S=b()(W(),Z()),A={props:["userdata","user"],setup(a,e){const t=(0,o.Z)(),l=(0,c.oR)(),r=((0,d.tv)(),(0,n.iH)(!1)),i=(0,n.iH)(),s=(0,n.iH)(),u=()=>{p()},m=(0,n.iH)(),p=r=>{const s={coll:a.user.group+"s",_id:a.userdata._id,firma:i.value.saveSignature().data};void 0!=r&&(s.firma=r),l.dispatch("api/SaveItem",s).then((a=>{t.notify("Firma actualizada"),e.emit("reload")}))},g=()=>{r.value=!0},f={process:(a,e,t,l,r,i,s)=>{const n=new FileReader;n.onloadend=()=>{const a=n.result;console.log(a),p(a),m.value.removeFiles()},n.readAsDataURL(e),l()},revert:null,labelTapToUndo:"Cerrar"};return{dialogFirma:r,openDialogFirma:g,signature:i,saveSignature:u,FilePond:S,signatureFile:s,processFile:f,pond:m}},components:{FilePond:S}};var j=t(4260),z=t(151),R=t(5589),H=t(8240),Q=t(4027),U=t(7518),P=t.n(U);const T=(0,j.Z)(A,[["render",k]]),G=T;P()(A,"components",{QCard:z.Z,QCardSection:R.Z,QBtn:H.Z,QImg:Q.Z});const I={components:{firma:G},setup(){(0,o.Z)();const a=(0,c.oR)(),e=((0,d.tv)(),(0,n.Fl)((()=>a.getters["api/getUser"]))),t=(0,n.iH)(null),l=()=>{a.dispatch("api/GetSingleData",{coll:e.value.group+"s",user:e.value.id}).then((a=>{t.value=a[0]}))};return l(),{user:e,userData:t,loadUserData:l}}};var L=t(4379);const O=(0,j.Z)(I,[["render",s]]),B=O;P()(I,"components",{QPage:L.Z})}}]);