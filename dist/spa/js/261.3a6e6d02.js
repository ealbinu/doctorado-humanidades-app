"use strict";(self["webpackChunkiconos_plataforma"]=self["webpackChunkiconos_plataforma"]||[]).push([[261],{8261:(e,a,n)=>{n.r(a),n.d(a,{default:()=>te});var l=n(3673),t=n(8880);const o=(0,l._)("div",{class:"text-h6 text-primary"},"Generaciones",-1),i={class:"col"},d={class:"col text-right"},u=(0,l.Uk)("Ver generación en área de estudiantes"),s=(0,l.Uk)("Eliminar");function r(e,a,n,r,c,m){const p=(0,l.up)("q-input"),w=(0,l.up)("q-btn"),g=(0,l.up)("q-form"),_=(0,l.up)("q-card-section"),f=(0,l.up)("q-card"),v=(0,l.up)("q-tooltip"),k=(0,l.up)("q-td"),W=(0,l.up)("addStudent"),b=(0,l.up)("q-tr"),h=(0,l.up)("q-table"),q=(0,l.up)("q-separator"),Z=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(Z,{padding:""},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"shadow-24"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[o,(0,l.Wm)(h,{class:"shadow-0",loading:r.loading,"no-data-label":"Sin datos",rows:r.items,columns:r.columns},{top:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"shadow-24 bg-dark full-width q-my-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"row q-col-gutter-md items-center",onSubmit:(0,t.iM)(r.submitNew,["prevent"])},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(p,{modelValue:r.newItem.name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.newItem.name=e),label:"Nombre",standout:"bg-primary text-white",dense:"",dark:"",required:""},null,8,["modelValue"])]),(0,l._)("div",d,[(0,l.Wm)(w,{label:"Crear generación",color:"primary",unelevated:"","no-caps":"",disabled:""==r.newItem.name,type:"submit"},null,8,["disabled"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),body:(0,l.w5)((e=>[(0,l.Wm)(b,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{key:"name",props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{onClick:a=>r.estudiantesFilter(e.row.name),flat:"",label:e.row.name,"no-caps":""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:2},1032,["onClick","label"])])),_:2},1032,["props"]),(0,l.Wm)(k,{key:"add",props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{generacion:e.row},null,8,["generacion"])])),_:2},1032,["props"]),(0,l.Wm)(k,{key:"actions",props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{icon:"delete",onClick:a=>r.deleteItem(e.row),size:"xs",padding:"4px",color:"negative",round:"",unelevated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[s])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["loading","rows","columns"])])),_:1})])),_:1}),(0,l.Wm)(q,{spaced:""})])),_:1})}var c=n(1959),m=n(9582),p=n(3617),w=(n(5616),n(8825)),g=n(2323);const _={class:"row full-width q-col-gutter-md"},f={class:"col-6"},v={class:"text-h6"},k=(0,l.Uk)("Estudiantes en "),W={class:"text-bold text-accent"},b=(0,l.Uk)(" generación."),h={class:"text-body1"},q={key:0,class:"text-caption text-grey"},Z=(0,l.Uk)("Generación actual: "),y={class:"col-6"},Q=(0,l._)("div",{class:"text-caption"},"Estudiantes",-1),x={class:"text-body1"},C={key:0,class:"text-caption text-grey"},G=(0,l.Uk)("Generación actual: ");function V(e,a,n,t,o,i){const d=(0,l.up)("q-btn"),u=(0,l.up)("q-item"),s=(0,l.up)("q-checkbox"),r=(0,l.up)("q-item-section"),c=(0,l.up)("q-list"),m=(0,l.up)("q-card-section"),p=(0,l.up)("q-card"),w=(0,l.up)("q-inner-loading"),V=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(d,{label:"Administrar estudiantes",unelevated:"",color:"primary",size:"sm","no-caps":"",onClick:t.dialogOpen},null,8,["onClick"]),(0,l.Wm)(V,{modelValue:t.dialog,"onUpdate:modelValue":a[0]||(a[0]=e=>t.dialog=e),"full-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"shadow-24"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",_,[(0,l._)("div",f,[(0,l.Wm)(p,{class:"shadow-24 bg-dark text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{dense:"",separator:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l._)("div",v,[k,(0,l._)("span",W,(0,g.zw)(n.generacion.name),1),b])])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.estudiantes,((e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[e.currentGen?((0,l.wg)(),(0,l.j4)(u,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{modelValue:e.currentGen,"onUpdate:modelValue":a=>e.currentGen=a,onClick:a=>t.addRemoveGen(e),color:"secondary"},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:2},1024),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l._)("div",h,(0,g.zw)(e.estudiante_user.name),1),e.currentGen?((0,l.wg)(),(0,l.iD)("div",q,[Z,(0,l._)("strong",null,(0,g.zw)(e.generacion.name),1)])):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)],64)))),256))])),_:1})])),_:1})])),_:1})]),(0,l._)("div",y,[(0,l.Wm)(p,{class:"shadow-24"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{dense:"",separator:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[Q])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.estudiantes,((e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[e.currentGen?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(u,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{modelValue:e.currentGen,"onUpdate:modelValue":a=>e.currentGen=a,onClick:a=>t.addRemoveGen(e)},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:2},1024),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l._)("div",x,(0,g.zw)(e.estudiante_user.name),1),e.generacion?((0,l.wg)(),(0,l.iD)("div",C,[G,(0,l._)("strong",null,(0,g.zw)(e.generacion.name),1)])):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1024))],64)))),256))])),_:1})])),_:1})])),_:1})])])])),_:1}),(0,l.Wm)(w,{showing:t.loading},null,8,["showing"])])),_:1})])),_:1},8,["modelValue"])])}var I=n(8603),U=n.n(I);const H={props:["generacion"],setup(e){const a=(0,w.Z)(),n=(0,p.oR)(),l=((0,m.tv)(),(0,c.iH)(!1)),t=()=>{l.value=!0,u()},o=(0,c.iH)(!0),i=(0,c.iH)(null),d=(0,c.iH)(null),u=async()=>{for(var a in o.value=!0,i.value=await n.dispatch("api/GetAllData","estudiantes"),i.value)i.value[a].generacion?i.value[a].currentGen=U().isEqual(i.value[a].generacion.name,e.generacion.name):i.value[a].currentGen=!1;o.value=!1},s=l=>{var t={_id:e.generacion._id,link:"generaciones"};l.currentGen?l.generacion=e.generacion:(t=null,l.generacion=null);var o={coll:"estudiantes",_id:l._id,generacion:t};n.dispatch("api/SaveItem",o).then((e=>{a.notify("Estudiante actualizado")}))};return{loading:o,dialog:l,dialogOpen:t,estudiantes:i,generacionModel:d,addRemoveGen:s}}};var S=n(4260),D=n(8240),z=n(6778),E=n(151),R=n(5589),A=n(7011),N=n(3414),T=n(2035),Y=n(5735),j=n(6941),F=n(7518),L=n.n(F);const O=(0,S.Z)(H,[["render",V]]),B=O;L()(H,"components",{QBtn:D.Z,QDialog:z.Z,QCard:E.Z,QCardSection:R.Z,QList:A.Z,QItem:N.Z,QItemSection:T.Z,QCheckbox:Y.Z,QInnerLoading:j.Z});const K={components:{addStudent:B},setup(){const e=(0,w.Z)(),a=(0,m.tv)(),n=(0,p.oR)(),l=(0,c.iH)(!0),t=(0,c.iH)([]),o=[{name:"name",label:"Nombre",field:"name",align:"left"},{name:"add",label:"Añadir estudiantes",field:"add",align:"center"},{name:"actions"}],i=(0,c.iH)({name:""}),d=()=>{const e={...i.value,coll:"generaciones"};n.dispatch("api/SaveItem",e).then((e=>{u(),i.value={name:""}}))},u=()=>{n.dispatch("api/GetAllData","generaciones").then((e=>{t.value=e,l.value=!1}))},s=a=>{e.dialog({title:"Eliminar generación",message:"Los estudiantes ligados a esta generación seguirán mostrando el nombre en su información.",cancel:"Cancelar",ok:"Eliminar"}).onOk((()=>{n.dispatch("api/RemoveItem",["generaciones","_id",a._id]).then((a=>{u(),e.notify("Eliminado")}))}))};u();const r=e=>{a.push({path:"/estudiantes",query:{filter:e}})};return{loadItem:u,loading:l,items:t,columns:o,newItem:i,submitNew:d,deleteItem:s,estudiantesFilter:r}}};var M=n(4379),P=n(3243),J=n(5269),X=n(4842),$=n(8186),ee=n(3884),ae=n(8870),ne=n(5869);const le=(0,S.Z)(K,[["render",r]]),te=le;L()(K,"components",{QPage:M.Z,QCard:E.Z,QCardSection:R.Z,QTable:P.Z,QForm:J.Z,QInput:X.Z,QBtn:D.Z,QTr:$.Z,QTd:ee.Z,QTooltip:ae.Z,QSeparator:ne.Z})}}]);